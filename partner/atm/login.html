<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>Login - At The Mile Logistics</title>

    <meta content="At The Mile Hub" property="og:title" />
    <meta content="At The Mile Logistics Drivers Hub - By CharlesWithC#7777" property="og:description" />
    <meta content="https://hub.atmvtc.com/" property="og:url" />
    <meta content="https://hub.atmvtc.com/images/logo.png" property="og:image" />
    <meta content="#B30000" data-react-helmet="true" name="theme-color" />
    <meta content="https://hub.atmvtc.com/images/bg.jpg" name="twitter:card">
    
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
		integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ=="
		crossorigin="anonymous" referrerpolicy="no-referrer"></script>
	<link rel="stylesheet" href="css/login.css">
	<script>
		function toastFactory(type, title, text, time, showConfirmButton) {
		  const Toast = Swal.mixin({
			  toast: true,
			  position: 'top-start',
			  showConfirmButton: showConfirmButton || false,
			  timer: time || '3000',
			  timerProgressBar: true,
			  didOpen: (toast) => {
				  toast.addEventListener('mouseenter', Swal.stopTimer);
				  toast.addEventListener('mouseleave', Swal.resumeTimer);
			  },
		  });
		
		  Toast.fire({
			  icon: type,
			  title: '<strong>' + title + '</strong>',
			  html: text,
		  });
		}
		
		function DiscordLogin() {
			location.href = 'https://drivershub.charlws.com/atm/user/login';
		}
		function GuestLogin(){
			localStorage.setItem("token","guest");
			location.href = '/';
		}

		function validate() {
			token = localStorage.getItem("token");
			if (token == undefined) {
				return;
			}
			$.ajax({
				url: "https://drivershub.charlws.com/atm/user/validate",
				type: "GET",
				dataType: "json",
				headers: {
					"Authorization": "Bearer " + token
				},
				success: function (data) {
					if (data.error == false) {
						localStorage.setItem("token", token);
						if (data.response.extra == "") {
							window.location.href = "/";
						} else {
							window.location.href = "/auth?token=" + token;
						}
					}
				}
			});
		}
		$(document).ready(function () {
			validate();
		});
	</script>
</head>

<body style="overflow:hidden">
	<audio autoplay style="display:none">
		<source src="/music.mp3" type="audio/mpeg">
	  </audio> 
	<div id="formContainer">
		<div class="formLeft">
			<img src="/images/logo.png">
		</div>
		<div class="formRight">
			<!-- Login form -->
			<form id="login" style="margin-top:40px">
				<header>
					<h1>Welcome back</h1>
					<p>Please login to access the Drivers Hub.</p>
				</header>
				<section>
					<button type="button" onclick="DiscordLogin();">Login With Discord</button>
				</section>
				<section style="position:relative;float:right;margin-top:-30px">
					<p style="font-size:15px;color:grey;text-align:right"><br><a style="cursor:pointer" onclick="GuestLogin();">Guest Login</a></p>
				</section>
			</form>
		</div>
	</div>
    <div style="position: fixed;bottom: 10px;color: lightgrey;text-align: center;">
        Copyright &copy 2022 At The Mile Logistics
        <br>
        Made by <a href="https://charlws.com" target="_blank" style="text-decoration:none;color:lightgrey">CharlesWithC#7777</a>
        <br>
        API: <a href="https://drivershub.charlws.com" target="_blank" style="text-decoration:none;color:lightgrey">drivershub.charlws.com</a>
        |
        Map: <a href="https://map.charlws.com" target="_blank" style="text-decoration:none;color:lightgrey">map.charlws.com</a>
    </div>
</body>

</html>